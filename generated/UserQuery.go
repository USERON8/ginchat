// Code generated by 'gorm.io/cli/gorm'. DO NOT EDIT.

package generated

import (
	"context"
	"strings"

	"gorm.io/cli/gorm/typed"
	"gorm.io/gorm"
	"gorm.io/gorm/clause"
)

func UserQuery[T any](db *gorm.DB, opts ...clause.Expression) _UserQueryInterface[T] {
	return _UserQueryImpl[T]{
		Interface: typed.G[T](db, opts...),
	}
}

type _UserQueryInterface[T any] interface {
	typed.Interface[T]
	GetByID(ctx context.Context, id uint) (T, error)
	GetByUsername(ctx context.Context, username string) (T, error)
	GetAllOnlineUsers(ctx context.Context) ([]T, error)
}

type _UserQueryImpl[T any] struct {
	typed.Interface[T]
}

func (e _UserQueryImpl[T]) GetByID(ctx context.Context, id uint) (T, error) {
	var sb strings.Builder
	_params := make([]any, 0, 1)

	sb.WriteString("SELECT * FROM user_basic WHERE id=?")
	_params = append(_params, id)

	var result T
	err := e.Raw(sb.String(), _params...).Scan(ctx, &result)
	return result, err
}

func (e _UserQueryImpl[T]) GetByUsername(ctx context.Context, username string) (T, error) {
	var sb strings.Builder
	_params := make([]any, 0, 1)

	sb.WriteString("SELECT * FROM user_basic WHERE username=?")
	_params = append(_params, username)

	var result T
	err := e.Raw(sb.String(), _params...).Scan(ctx, &result)
	return result, err
}

func (e _UserQueryImpl[T]) GetAllOnlineUsers(ctx context.Context) ([]T, error) {
	var sb strings.Builder
	_params := make([]any, 0, 0)

	sb.WriteString("SELECT * FROM user_basic WHERE is_logged_in = 1")

	var result []T
	err := e.Raw(sb.String(), _params...).Scan(ctx, &result)
	return result, err
}
